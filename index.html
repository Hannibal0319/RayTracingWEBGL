<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebGL Ray Tracer</title>
    <!-- Load Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the canvas to ensure it fills the container responsively */
        #rayTraceCanvas {
            display: block;
            width: 100%;
            height: 500px;
            max-height: 80vh; /* Responsive height limit */
            border-radius: 0.75rem; /* rounded-xl */
        }
    </style>
    <script>
        // Set up global configuration for Tailwind
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>

    <script src="initShaders2.js" defer></script>
    <script src="MV.js" defer></script>
    <script src="scene.js" defer></script>
    <script src="setUpWebGL.js" defer></script>
    <script src="render.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/webgl-obj-loader@2.0.8/dist/webgl-obj-loader.min.js" defer></script>

    <script src="objLoader.js" defer></script>

    <script src="main.js" defer></script>
</head>
<body class="bg-gray-900 min-h-screen p-4 sm:p-8 font-sans text-white flex items-center justify-center">

    <div class="w-full max-w-4xl bg-gray-800 p-6 sm:p-8 rounded-2xl shadow-2xl space-y-6">
        <h1 class="text-3xl sm:text-4xl font-extrabold text-indigo-400 mb-2">
            Modular WebGL Ray Tracer
        </h1>
        <p class="text-gray-400">
            This engine uses the fragment shader to perform all ray tracing calculations, rendering a single diffuse sphere.
        </p>

        <!-- Canvas where the ray tracing output will be displayed -->
        <div class="relative bg-gray-900 rounded-xl overflow-hidden shadow-inner shadow-gray-700">
            <canvas id="rayTraceCanvas"></canvas>
            <div id="fps-counter" class="absolute top-2 left-2 text-sm text-white bg-black bg-opacity-50 px-2 py-1 rounded">FPS: --</div>
        </div>

        <!-- Controls -->
        <div class="grid gap-4 sm:grid-cols-2 text-sm text-gray-200">
            <div class="space-y-2">
                <p class="text-xs uppercase tracking-wide text-gray-400">Camera & Plane</p>
                <label class="block">Aperture
                    <input id="aperture-slider" type="range" min="0" max="0.06" step="0.0005" value="0.000" class="w-full">
                    <span id="aperture-value" class="text-xs text-gray-400">0.000</span>
                </label>
                <label class="block">Field of View (deg)
                    <input id="fov-slider" type="range" min="20" max="110" step="1" value="60" class="w-full">
                    <span id="fov-value" class="text-xs text-gray-400">60</span>
                </label>
                <label class="block">Plane Y
                    <input id="planeY-slider" type="range" min="-3" max="1" step="0.05" value="-1.0" class="w-full">
                    <span id="planeY-value" class="text-xs text-gray-400">-1.0</span>
                </label>
            </div>
            <div class="space-y-2">
                <p class="text-xs uppercase tracking-wide text-gray-400">Teapot Material</p>
                <label class="block">Reflectivity
                    <input id="teapot-reflectivity" type="range" min="0" max="1" step="0.01" value="0.10" class="w-full">
                    <span id="teapot-reflectivity-value" class="text-xs text-gray-400">0.10</span>
                </label>
                <label class="block">Index of Refraction
                    <input id="teapot-ior" type="range" min="1" max="2.5" step="0.01" value="1.50" class="w-full">
                    <span id="teapot-ior-value" class="text-xs text-gray-400">1.50</span>
                </label>
            </div>
            <div class="space-y-2">
                <p class="text-xs uppercase tracking-wide text-gray-400">Sky Point Light</p>
                <label class="block">Intensity
                    <input id="light-intensity" type="range" min="0" max="20" step="0.1" value="8.0" class="w-full">
                    <span id="light-intensity-value" class="text-xs text-gray-400">8.0</span>
                </label>
            </div>
            <div class="space-y-1 text-gray-400">
                <p><strong>Scene Configuration:</strong></p>
                <p id="gl-version" class="text-xs text-gray-300">Detecting WebGL...</p>
            </div>
        </div>
    </div>
</body>
</html>