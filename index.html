<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebGL Ray Tracer</title>
    <!-- Load Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the canvas to ensure it fills the container responsively */
        #rayTraceCanvas {
            display: block;
            width: 100%;
            height: 500px;
            max-height: 80vh; /* Responsive height limit */
            border-radius: 0.75rem; /* rounded-xl */
        }
    </style>
    <script>
        // Set up global configuration for Tailwind
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>

    <script src="initShaders2.js" defer></script>
    <script src="MV.js" defer></script>
    <script src="scene.js" defer></script>
    <script src="setUpWebGL.js" defer></script>
    <script src="render.js" defer></script>

    <script src="main.js" defer></script>
</head>
<body class="bg-gray-900 min-h-screen p-4 sm:p-8 font-sans text-white flex items-center justify-center">

    <div class="w-full max-w-4xl bg-gray-800 p-6 sm:p-8 rounded-2xl shadow-2xl space-y-6">
        <h1 class="text-3xl sm:text-4xl font-extrabold text-indigo-400 mb-2">
            Modular WebGL Ray Tracer
        </h1>
        <p class="text-gray-400">
            This engine uses the fragment shader to perform all ray tracing calculations, rendering a single diffuse sphere.
        </p>

        <!-- Canvas where the ray tracing output will be displayed -->
        <div class="relative bg-gray-900 rounded-xl overflow-hidden shadow-inner shadow-gray-700">
            <canvas id="rayTraceCanvas"></canvas>
            <div id="fps-counter" class="absolute top-2 left-2 text-sm text-white bg-black bg-opacity-50 px-2 py-1 rounded">FPS: --</div>
        </div>

        <!-- Sphere and Light Parameters -->
        <div class="text-sm text-gray-400 space-y-1">
            <p><strong>Scene Configuration:</strong></p>
        </div>
        <!-- Material Controls for Selected Object -->
        <div id="material-controls" class="hidden mt-4 p-4 bg-gray-700 rounded-xl space-y-3">
            <h2 class="text-lg font-bold text-indigo-300">Selected Object Material</h2>
            <div class="flex flex-col gap-2">
                <label>Material Type
                    <select id="mat-type" class="w-full bg-gray-800 text-white rounded p-1 mt-1">
                        <option value="0">Lambertian</option>
                        <option value="1">Reflective</option>
                        <option value="2">Refractive</option>
                        <option value="4">Metallic/Roughness</option>
                    </select>
                </label>
                <label id="mat-diffuse-group">Diffuse Color
                    <input id="mat-r" type="range" min="0" max="1" step="0.01" value="1" class="w-full">
                    <input id="mat-g" type="range" min="0" max="1" step="0.01" value="1" class="w-full">
                    <input id="mat-b" type="range" min="0" max="1" step="0.01" value="1" class="w-full">
                    <span id="mat-color-val" class="ml-2 font-mono"></span>
                </label>
                <label id="mat-reflect-group">Reflectivity
                    <input id="mat-reflect" type="range" min="0" max="1" step="0.01" value="0" class="w-full">
                    <span id="mat-reflect-val" class="ml-2 font-mono"></span>
                </label>
                <label id="mat-ior-group">IOR
                    <input id="mat-ior" type="range" min="1" max="2.5" step="0.01" value="1" class="w-full">
                    <span id="mat-ior-val" class="ml-2 font-mono"></span>
                </label>
                <label id="mat-metallic-group">Metallic
                    <input id="mat-metallic" type="range" min="0" max="1" step="0.01" value="0" class="w-full">
                    <span id="mat-metallic-val" class="ml-2 font-mono"></span>
                </label>
                <label id="mat-roughness-group">Roughness
                    <input id="mat-roughness" type="range" min="0" max="1" step="0.01" value="0.5" class="w-full">
                    <span id="mat-roughness-val" class="ml-2 font-mono"></span>
                </label>
            </div>
        </div>
    </div>
</body>
</html>